<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡πÑ‡∏≠‡∏ó‡∏µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff6b00 0%, #ff8800 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Snowflake styling */
        .snowflake {
            color: #fff;
            font-size: 1em;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 5px #000;
        }
        .snowflake,.snowflake .inner{animation-iteration-count:infinite;animation-play-state:running}@keyframes snowflakes-fall{0%{transform:translateY(0)}100%{transform:translateY(110vh)}}@keyframes snowflakes-shake{0%,100%{transform:translateX(0)}50%{transform:translateX(80px)}}.snowflake{position:fixed;top:-10%;z-index:9999;-webkit-user-select:none;user-select:none;cursor:default;pointer-events:none;animation-name:snowflakes-shake;animation-duration:3s;animation-timing-function:ease-in-out}.snowflake .inner{animation-duration:10s;animation-name:snowflakes-fall;animation-timing-function:linear}.snowflake:nth-of-type(0){left:1%;animation-delay:0s}.snowflake:nth-of-type(0) .inner{animation-delay:0s}.snowflake:first-of-type{left:10%;animation-delay:1s}.snowflake:first-of-type .inner,.snowflake:nth-of-type(8) .inner{animation-delay:1s}.snowflake:nth-of-type(2){left:20%;animation-delay:.5s}.snowflake:nth-of-type(2) .inner,.snowflake:nth-of-type(6) .inner{animation-delay:6s}.snowflake:nth-of-type(3){left:30%;animation-delay:2s}.snowflake:nth-of-type(11) .inner,.snowflake:nth-of-type(3) .inner{animation-delay:4s}.snowflake:nth-of-type(4){left:40%;animation-delay:2s}.snowflake:nth-of-type(10) .inner,.snowflake:nth-of-type(4) .inner{animation-delay:2s}.snowflake:nth-of-type(5){left:50%;animation-delay:3s}.snowflake:nth-of-type(5) .inner{animation-delay:8s}.snowflake:nth-of-type(6){left:60%;animation-delay:2s}.snowflake:nth-of-type(7){left:70%;animation-delay:1s}.snowflake:nth-of-type(7) .inner{animation-delay:2.5s}.snowflake:nth-of-type(8){left:80%;animation-delay:0s}.snowflake:nth-of-type(9){left:90%;animation-delay:1.5s}.snowflake:nth-of-type(9) .inner{animation-delay:3s}.snowflake:nth-of-type(10){left:25%;animation-delay:0s}.snowflake:nth-of-type(11){left:65%;animation-delay:2.5s}

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .booking-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .form-col {
            flex: 1;
            min-width: 250px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #ff6b00;
            box-shadow: 0 0 0 3px rgba(255, 107, 0, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #ff6b00, #ff8800);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 0, 0.3);
        }

        .tables-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .table-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .table-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .table-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
        }

        .table-capacity {
            background: #ff6b00;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .time-slot {
            padding: 8px 12px;
            text-align: center;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .time-slot.available {
            background: #e8f5e8;
            color: #2d5a2d;
            border: 2px solid #4caf50;
        }

        .time-slot.available:hover {
            background: #4caf50;
            color: white;
        }

        .time-slot.booked {
            background: #ffeaea;
            color: #d32f2f;
            border: 2px solid #f44336;
            cursor: not-allowed;
        }

        .time-slot.selected {
            background: #ff6b00;
            color: white;
            border: 2px solid #5a67d8;
        }

        .booking-summary {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .booking-summary.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .summary-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .summary-item:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.1rem;
            color: #ff6b00;
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Login */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .login-box {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
        }

        .user-bookings {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .booking-card {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            position: relative;
        }

        .booking-status {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-checked-in {
            background: #d4edda;
            color: #155724;
        }

        .status-completed {
            background: #cce5ff;
            color: #004085;
        }

        .table-status-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            background: #4CAF50;
            color: white;
        }

        .table-occupancy {
            margin-top: 10px;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 8px;
            font-size: 0.9em;
        }

        .user-count {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #ff6b00;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .form-col {
                min-width: 100%;
            }

            .time-slots {
                grid-template-columns: repeat(2, 1fr);
            }

            .header h1 {
                font-size: 2rem;
            }
        }

        .register-link {
            color: #ff6b00;
            text-decoration: none;
            font-weight: 600;
            margin-top: 15px;
            display: block;
            text-align: center;
        }

        .register-link:hover {
            color: #ff8800;
        }

        .kmitl-logo {
            max-width: 150px;
            margin: 0 auto 20px;
            display: block;
        }

        .user-profile {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .profile-button {
            background: #ff6b00;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .profile-modal {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-top: 10px;
            display: none;
        }

        .profile-modal.show {
            display: block;
        }

        .profile-form {
            display: grid;
            gap: 15px;
        }

        .profile-field {
            display: grid;
            gap: 5px;
        }

        .edit-button {
            background: #ff8800;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .nav-links {
            margin-top: 20px;
        }
        
        .history-link {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
        }

        .history-link:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .table-status.available {
            background: #4CAF50;
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            margin-top: 10px;
            font-weight: bold;
        }

        .logo-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .logo-container img {
            width: 100px;
            height: auto;
            opacity: 0.8;
        }

        .header-logos {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header-logos img {
            height: 60px;
            width: auto;
        }

        .booking-card {
            background: white;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .booking-history {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
        }

        .order-list {
            margin-top: 20px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .order-item button {
            background: #ff4444;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .order-summary {
            margin-top: 20px;
            padding-top: 10px;
            border-top: 2px solid #ddd;
            font-weight: bold;
        }

        .menu-item-count {
            background: #ff6b00;
            color: white;
            padding: 2px 6px;
            border-radius: 50%;
            font-size: 0.8em;
            margin-left: 5px;
        }

        .btn-order {
            background: #ff6b00;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .table-name, .table-type {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .queue-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            max-width: 400px;
            margin: auto;
        }

        .restaurant-name {
            color: #ff6b00;
            font-size: 1.5em;
            margin: 10px 0;
            text-align: center;
        }

        .queue-menu-item {
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
            font-size: 1.1em;
        }

        .queue-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        .queue-actions .btn {
            padding: 10px 20px;
            font-size: 0.9em;
        }

        @media print {
            body * {
                visibility: hidden;
            }
            .queue-popup, .queue-popup * {
                visibility: visible;
            }
            .queue-popup {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            .queue-actions {
                display: none;
            }
        }

        .queue-container {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .queue-info {
            display: grid;
            gap: 8px;
        }

        .queue-count {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }

        .wait-time {
            color: #666;
        }

        .queue-status {
            padding: 5px 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }

        .queue-status.available {
            background: #4CAF50;
            color: white;
        }

        .queue-status.full {
            background: #f44336;
            color: white;
        }

        .btn-order:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
    <script src="userStorage.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <!-- Snowflakes -->
    <div class="snowflakes" aria-hidden="true">
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
        <div class="snowflake"><div class="inner">‚ùÖ</div></div>
    </div>

    <div class="container">
        <!-- ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ -->
        <div id="bookingSection">
            <div class="header">
                <div class="header-logos">
                    <img src="images/it-logo.png" alt="IT Logo">
                    <img src="https://www.kmitl.ac.th/sites/default/files/2023-02/KMITL_Logo.png" alt="KMITL Logo" class="kmitl-logo">
                    <img src="images/canteen-logo.png" alt="Canteen Logo">
                </div>
                <h1>üçΩÔ∏è ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</h1>
                <p>‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏û‡∏£‡∏∞‡∏à‡∏≠‡∏°‡πÄ‡∏Å‡∏•‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏´‡∏≤‡∏£‡∏•‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏ö‡∏±‡∏á</p>
            </div>

            <div class="booking-section">
                <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
                <form id="bookingForm">
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="customerName">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                                <input type="text" id="customerName" name="customerName" required>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label for="phoneNumber">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                                <input type="tel" id="phoneNumber" name="phoneNumber" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="bookingDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á</label>
                        <input type="date" id="bookingDate" name="bookingDate" required>
                    </div>

                    <div class="form-group">
                        <label for="specialRequest">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                        <textarea id="specialRequest" name="specialRequest" rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏ú‡∏±‡∏Å ‡πÑ‡∏°‡πà‡πÄ‡∏ú‡πá‡∏î"></textarea>
                    </div>
                </form>

                <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á -->
                <div id="currentOrderList" class="order-list" style="display: none;">
                    <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á</h3>
                    <div id="orderItems"></div>
                    <div class="order-summary">
                        <div class="total-items">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: <span id="totalItems">0</span></div>
                        <div class="total-price">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°: <span id="totalPrice">0</span> ‡∏ö‡∏≤‡∏ó</div>
                    </div>
                    <button class="btn" onclick="confirmOrder()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
                </div>
            </div>

            <div class="booking-section">
                <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß</h2>
                <div class="tables-grid" id="tablesGrid"></div>
            </div>

            <div class="booking-summary" id="bookingSummary">
                <div class="summary-title">‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</div>
                <div id="summaryContent"></div>
                <button class="btn" onclick="confirmBooking()" style="width: 100%; margin-top: 20px;">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£
                </button>
            </div>
        </div>

        <!-- ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á -->
        <div class="booking-history" id="bookingHistory">
            <h2>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
            <div id="historyList"></div>
        </div>

        <div class="user-profile" id="userProfile" style="display: none;">
            <div class="profile-button" onclick="toggleProfile()">
                <span>üë§</span>
                <span id="profileName"></span>
            </div>
            <div class="profile-modal" id="profileModal">
                <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h3>
                <div class="profile-form">
                    <div class="profile-field">
                        <label>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤:</label>
                        <input type="text" id="profileStudentId" disabled>
                    </div>
                    <div class="profile-field">
                        <label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
                        <input type="text" id="profileFullName">
                    </div>
                    <div class="profile-field">
                        <label>Email:</label>
                        <input type="email" id="profileEmail">
                    </div>
                    <div class="profile-field">
                        <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</label>
                        <input type="tel" id="profilePhone">
                    </div>
                    <div class="profile-field">
                        <label>‡∏Ñ‡∏ì‡∏∞:</label>
                        <input type="text" id="profileFaculty" value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®" disabled>
                    </div>
                    <button class="edit-button" onclick="saveProfile()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                    <button class="btn" onclick="logout()" style="width: 100%; margin-top: 10px;">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                </div>
            </div>
        </div>

        <div class="logo-container">
            <img src="images/corner-logo.png" alt="Corner Logo">
        </div>
    </div>

    <script>
// Single declaration of shared variables
const restaurants = [
    {
        id: 1,
        name: "‡∏£‡πâ‡∏≤‡∏ô‡πÇ‡∏Ñ‡πÄ‡∏à",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10, // ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡πà‡∏≠‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
        menu: [
            { name: "‡∏ö‡∏¥‡∏ö‡∏¥‡∏°‡∏ö‡∏±‡∏ö", price: 89 },
            { name: "‡∏Ñ‡∏¥‡∏°‡∏ö‡∏±‡∏ö", price: 79 },
            { name: "‡∏ï‡πá‡∏≠‡∏Å‡∏ö‡∏Å‡∏Å‡∏µ", price: 69 }
        ]
    },
    {
        id: 2,
        name: "‡∏Ñ‡∏£‡∏±‡∏ß‡πÑ‡∏ó‡∏¢‡∏≠‡∏µ‡∏™‡∏≤‡∏ô",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢-‡∏≠‡∏µ‡∏™‡∏≤‡∏ô",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡∏™‡πâ‡∏°‡∏ï‡∏≥‡πÑ‡∏ó‡∏¢", price: 60 },
            { name: "‡∏•‡∏≤‡∏ö‡∏´‡∏°‡∏π", price: 70 },
            { name: "‡∏ï‡πâ‡∏°‡πÅ‡∏ã‡πà‡∏ö‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡∏≠‡πà‡∏≠‡∏ô", price: 80 }
        ]
    },
    {
        id: 3,
        name: "Pasta House",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏¥‡∏ï‡∏≤‡πÄ‡∏•‡∏µ‡∏¢‡∏ô",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡∏ï‡∏ï‡∏µ‡πâ‡∏Ñ‡∏≤‡πÇ‡∏ö‡∏ô‡∏≤‡∏£‡πà‡∏≤", price: 129 },
            { name: "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ã‡∏µ‡∏ü‡∏π‡πâ‡∏î", price: 199 },
            { name: "‡∏•‡∏≤‡∏ã‡∏≤‡∏ô‡∏ç‡πà‡∏≤", price: 159 }
        ]
    },
    {
        id: 4,
        name: "Sushi Bar",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏î‡∏¥‡∏ö", price: 159 },
            { name: "‡∏£‡∏≤‡πÄ‡∏°‡∏ô‡∏´‡∏°‡∏π‡∏ä‡∏≤‡∏ä‡∏π", price: 129 },
            { name: "‡∏ä‡∏∏‡∏î‡∏ã‡∏π‡∏ä‡∏¥ 12 ‡∏ä‡∏¥‡πâ‡∏ô", price: 259 }
        ]
    },
    {
        id: 5,
        name: "‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡πá‡∏î",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö‡πÑ‡∏Ç‡πà‡∏î‡∏≤‡∏ß", price: 55 },
            { name: "‡∏ú‡∏±‡∏î‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏´‡∏°‡∏π", price: 50 },
            { name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏ó‡∏∞‡πÄ‡∏•", price: 70 }
        ]
    },
    {
        id: 6,
        name: "Sichuan Kitchen",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏µ‡∏ô",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡∏´‡∏°‡∏≤‡∏•‡πà‡∏≤‡∏ä‡∏≤‡∏ö‡∏π", price: 199 },
            { name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏î‡∏¢‡πà‡∏≤‡∏á", price: 89 },
            { name: "‡∏ú‡∏±‡∏î‡∏´‡∏°‡πà‡∏≤‡∏°‡πà‡∏≤‡∏ó‡∏∞‡πÄ‡∏•", price: 120 }
        ]
    },
    {
        id: 7,
        name: "Halal Food",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏°‡∏∏‡∏™‡∏•‡∏¥‡∏°",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏Å‡πÑ‡∏Å‡πà", price: 69 },
            { name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡∏™‡πâ‡∏°‡∏ï‡∏≥", price: 65 },
            { name: "‡∏ã‡∏∏‡∏õ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠", price: 89 }
        ]
    },
    {
        id: 8,
        name: "Veggie Fresh",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏°‡∏±‡∏á‡∏™‡∏ß‡∏¥‡∏£‡∏±‡∏ï‡∏¥",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡∏ú‡∏±‡∏î‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°‡∏°‡∏¥‡∏ï‡∏£", price: 60 },
            { name: "‡πÄ‡∏´‡πá‡∏î‡∏ó‡∏≠‡∏î‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°", price: 65 },
            { name: "‡πÅ‡∏Å‡∏á‡∏à‡∏∑‡∏î‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ", price: 55 }
        ]
    },
    {
        id: 9,
        name: "Mekong River",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ß‡∏µ‡∏¢‡∏î‡∏ô‡∏≤‡∏°",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡πÄ‡∏ù‡∏≠‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ï‡∏∏‡πã‡∏ô", price: 89 },
            { name: "‡∏õ‡∏≠‡πÄ‡∏õ‡∏µ‡πä‡∏¢‡∏∞‡∏™‡∏î", price: 69 },
            { name: "‡∏ö‡∏±‡πà‡∏ô‡∏´‡∏°‡∏µ‡πà", price: 79 }
        ]
    },
    {
        id: 10,
        name: "Indian Curry",
        type: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡∏µ‡∏¢",
        currentQueue: 0,
        maxQueue: 15,
        estimatedTime: 10,
        menu: [
            { name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏Å‡πÑ‡∏Å‡πà‡∏°‡∏≤‡∏ã‡∏≤‡∏•‡πà‡∏≤", price: 99 },
            { name: "‡πÅ‡∏Å‡∏á‡∏Å‡∏∞‡∏´‡∏£‡∏µ‡πà‡πÑ‡∏Å‡πà", price: 89 },
            { name: "‡∏ô‡∏≤‡∏ô‡πÑ‡∏Å‡πà‡∏ï‡∏∏‡πã‡∏ô", price: 49 }
        ]
    }
];
const queueNumbers = Array.from({length: 100}, (_, i) => i + 1);

// Global state variables
let currentUser = null;
let users = [];
let bookings = [];
let selectedBooking = { table: null, time: null };
let currentOrder = {
    items: [],
    restaurantId: null,
    queueNumber: null
};

// Initialize from localStorage
try {
    currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
    users = JSON.parse(localStorage.getItem('users')) || [];
    bookings = JSON.parse(localStorage.getItem('bookings')) || [{
        id: 1,
        userId: "12345678",
        tableId: 1,
        date: new Date().toISOString().split('T')[0],
        time: "12:00",
        customerName: "‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á", 
        phoneNumber: "0812345678",
        specialRequest: ""
    }];
    localStorage.setItem('bookings', JSON.stringify(bookings));
} catch (e) {
    console.error('Error loading data from localStorage:', e);
}

// Functions
function getStatusText(status) {
    switch(status) {
        case 'pending': return '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£';
        case 'cooking': return '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£';
        case 'ready': return '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü';
        case 'completed': return '‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß';
        default: return status;
    }
}

// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô confirmOrder
function confirmOrder() {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    const customerName = document.getElementById('customerName').value.trim();
    const phoneNumber = document.getElementById('phoneNumber').value.trim();
    const bookingDate = document.getElementById('bookingDate').value;

    if (!customerName || !phoneNumber || !bookingDate) {
        Swal.fire({
            title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô',
            text: '‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£',
            icon: 'warning',
            confirmButtonColor: '#ff6b00'
        });
        return;
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå
    const phoneRegex = /^[0-9]{10}$/;
    if (!phoneRegex.test(phoneNumber)) {
        Swal.fire({
            title: '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
            text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå 10 ‡∏´‡∏•‡∏±‡∏Å',
            icon: 'warning',
            confirmButtonColor: '#ff6b00'
        });
        return;
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£
    if (currentOrder.items.length === 0) {
        Swal.fire({
            title: '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£',
            text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏±‡πà‡∏á',
            icon: 'warning',
            confirmButtonColor: '#ff6b00'
        });
        return;
    }

    const restaurant = restaurants.find(r => r.id === currentOrder.restaurantId);
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á
    if (restaurant.currentQueue >= restaurant.maxQueue) {
        Swal.fire({
            title: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡πà‡∏á‡πÑ‡∏î‡πâ',
            text: '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á',
            icon: 'warning',
            confirmButtonColor: '#ff6b00'
        });
        return;
    }

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£
    restaurant.currentQueue++;
    updateRestaurantDisplay(currentOrder.restaurantId);

    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á localStorage
    localStorage.setItem('restaurants', JSON.stringify(restaurants));

    // ‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£
    const queueNumber = generateUniqueQueueNumber();
    
    const order = {
        id: Date.now(),
        restaurantId: currentOrder.restaurantId,
        items: currentOrder.items,
        note: document.getElementById('specialRequest').value,
        queueNumber: queueNumber,
        status: 'pending',
        orderDate: new Date().toISOString(),
        customerName: customerName,
        phoneNumber: phoneNumber,
        bookingDate: bookingDate
    };

    saveOrder(order);
    showQueueCard(order);
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß
    setTimeout(() => {
        Swal.fire({
            title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
            text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£',
            icon: 'success',
            showCancelButton: true,
            confirmButtonColor: '#ff6b00',
            cancelButtonColor: '#d33',
            confirmButtonText: '‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß',
            cancelButtonText: '‡∏õ‡∏¥‡∏î'
        }).then((result) => {
            if (result.isConfirmed) {
                downloadQueueCard(order.queueNumber);
            }
        });
    }, 500);
    
    // Reset form
    Object.assign(currentOrder, {
        items: [],
        restaurantId: null,
        queueNumber: null
    });
    
    updateOrderList();
    document.getElementById('customerName').value = '';
    document.getElementById('phoneNumber').value = '';
    document.getElementById('specialRequest').value = '';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏¥‡∏ß
function updateQueueStatus(restaurantId) {
    const restaurant = restaurants.find(r => r.id === restaurantId);
    if (!restaurant) return;
    
    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏¥‡∏ß
    restaurant.currentQueue++;
    
    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏¥‡∏ß‡∏•‡∏á localStorage
    localStorage.setItem('restaurants', JSON.stringify(restaurants));
    
    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏¥‡∏ß
    updateRestaurantDisplay(restaurantId);
}

function updateRestaurantDisplay(restaurantId) {
    const restaurant = restaurants.find(r => r.id === restaurantId);
    if (!restaurant) return;

    const queueDisplay = document.querySelector(`#queue-${restaurantId}`);
    if (queueDisplay) {
        const waitTime = restaurant.currentQueue * restaurant.estimatedTime;
        queueDisplay.innerHTML = `
            <div class="queue-info">
                <div class="queue-count">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏¥‡∏ß: ${restaurant.currentQueue}/${restaurant.maxQueue}</div>
                <div class="wait-time">‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì: ${waitTime} ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                <div class="queue-status ${restaurant.currentQueue >= restaurant.maxQueue ? 'full' : 'available'}">
                    ${restaurant.currentQueue >= restaurant.maxQueue ? '‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏ï‡πá‡∏°' : '‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå'}
                </div>
            </div>
        `;
    }
}

function renderTables() {
    const tablesGrid = document.getElementById('tablesGrid');
    if (!tablesGrid) return;
    
    tablesGrid.innerHTML = '';
    
    restaurants.forEach(restaurant => {
        const tableCard = document.createElement('div');
        tableCard.className = 'table-card';
        
        tableCard.innerHTML = `
            <div class="table-header">
                <div class="table-name">${restaurant.name}</div>
                <div class="table-type">${restaurant.type}</div>
            </div>
            <div id="queue-${restaurant.id}" class="queue-container"></div>
            <div class="menu-items">
                ${restaurant.menu.map(item => `
                    <div class="menu-item">
                        <span class="menu-item-name">${item.name}</span>
                        <span class="menu-item-price">${item.price} ‡∏ö‡∏≤‡∏ó</span>
                        <button onclick="addToOrder(${restaurant.id}, '${item.name}', ${item.price})" 
                                class="btn-order"
                                ${restaurant.currentQueue >= restaurant.maxQueue ? 'disabled' : ''}>
                            ${restaurant.currentQueue >= restaurant.maxQueue ? '‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏ï‡πá‡∏°' : '‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£'}
                        </button>
                    </div>
                `).join('')}
            </div>
        `;
        
        tablesGrid.appendChild(tableCard);
        updateRestaurantDisplay(restaurant.id);
    });
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
document.addEventListener('DOMContentLoaded', function() {
    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å localStorage
    const savedRestaurants = localStorage.getItem('restaurants');
    if (savedRestaurants) {
        const savedData = JSON.parse(savedRestaurants);
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏¥‡∏ß
        restaurants.forEach(restaurant => {
            const savedRestaurant = savedData.find(r => r.id === restaurant.id);
            if (savedRestaurant) {
                restaurant.currentQueue = savedRestaurant.currentQueue;
            }
        });
    }
    renderTables();
});

// ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
const additionalStyle = document.createElement('style');
additionalStyle.textContent = `
    .menu-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #eee;
    }

    .menu-item-name {
        flex: 1;
        font-size: 1.1em;
        font-weight: 500;
    }

    .menu-item-price {
        margin: 0 15px;
        font-weight: bold;
        color: #ff6b00;
    }

    .btn-order {
        background: #ff6b00;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-order:hover {
        background: #ff8800;
        transform: translateY(-2px);
    }
`;
document.head.appendChild(additionalStyle);

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£
function addToOrder(restaurantId, itemName, price) {
    const restaurant = restaurants.find(r => r.id === restaurantId);
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if (currentOrder.items.length > 0 && currentOrder.restaurantId !== restaurantId) {
        Swal.fire({
            title: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡πà‡∏á‡πÑ‡∏î‡πâ',
            text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå',
            icon: 'warning',
            confirmButtonColor: '#ff6b00'
        });
        return;
    }
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏¥‡∏ß
    if (restaurant.currentQueue >= restaurant.maxQueue) {
        Swal.fire({
            title: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡πà‡∏á‡πÑ‡∏î‡πâ',
            text: '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á',
            icon: 'warning',
            confirmButtonColor: '#ff6b00'
        });
        return;
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á
    document.getElementById('currentOrderList').style.display = 'block';
    
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
    currentOrder.items.push({
        name: itemName,
        price: price,
        quantity: 1
    });
    currentOrder.restaurantId = restaurantId;
    
    updateOrderList();
}

// ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á
function updateOrderList() {
    const orderItems = document.getElementById('orderItems');
    const totalItems = document.getElementById('totalItems');
    const totalPrice = document.getElementById('totalPrice');
    
    let html = '';
    let total = 0;
    
    currentOrder.items.forEach((item, index) => {
        html += `
            <div class="order-item">
                <span>${item.name}</span>
                <span>${item.price} ‡∏ö‡∏≤‡∏ó</span>
                <button onclick="removeItem(${index})">‡∏•‡∏ö</button>
            </div>
        `;
        total += item.price * item.quantity;
    });
    
    orderItems.innerHTML = html;
    totalItems.textContent = currentOrder.items.length;
    totalPrice.textContent = total;
}

// ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£
function removeItem(index) {
    currentOrder.items.splice(index, 1);
    if (currentOrder.items.length === 0) {
        document.getElementById('currentOrderList').style.display = 'none';
    }
    updateOrderList();
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß
function showQueueCard(order) {
    const restaurant = restaurants.find(r => r.id === order.restaurantId);
    const waitTime = restaurant.estimatedTime * restaurant.currentQueue;
    
    const popup = document.createElement('div');
    popup.className = 'queue-popup';
    popup.innerHTML = `
        <div class="queue-card" id="queueCard">
            <button class="close-popup" onclick="this.parentElement.parentElement.remove()">√ó</button>
            <div class="queue-header">
                <h2>‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                <h3 class="restaurant-name">${restaurant.name}</h3>
                <div class="queue-number">‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏µ‡πà: ${order.queueNumber}</div>
                <div class="estimated-time">‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì: ${waitTime} ‡∏ô‡∏≤‡∏ó‡∏µ</div>
            </div>
            <div class="queue-detail">
                <p>‡∏ä‡∏∑‡πà‡∏≠: ${order.customerName}</p>
                <p>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${order.phoneNumber}</p>
                <p>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</p>
                ${order.items.map(item => `
                    <div class="queue-menu-item">${item.name} - ${item.price} ‡∏ö‡∏≤‡∏ó</div>
                `).join('')}
                <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${order.note || '-'}</p>
                <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${getStatusText(order.status)}</p>
            </div>
            <div class="queue-actions">
                <button class="btn" onclick="window.print()">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß</button>
                <button class="btn" onclick="downloadQueueCard(${order.queueNumber})">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß</button>
                <button class="btn" onclick="this.parentElement.parentElement.parentElement.remove()">‡∏õ‡∏¥‡∏î</button>
            </div>
        </div>
    `;
    document.body.appendChild(popup);
    
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
    updateHistory(order);
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏±‡∏ï‡∏£‡∏Ñ‡∏¥‡∏ß
function downloadQueueCard(queueNumber) {
    const queueCard = document.getElementById('queueCard');
    
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á canvas ‡∏à‡∏≤‡∏Å div
    html2canvas(queueCard).then(canvas => {
        // ‡πÅ‡∏õ‡∏•‡∏á canvas ‡πÄ‡∏õ‡πá‡∏ô blob
        canvas.toBlob(function(blob) {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.download = `queue-ticket-${queueNumber}.png`;
            link.href = url;
            link.click();
            
            // ‡∏•‡∏ö URL ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
            URL.revokeObjectURL(url);
        });
    });
}

// ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£
function updateHistory(order) {
    const historyList = document.getElementById('historyList');
    const historyItem = document.createElement('div');
    historyItem.className = 'booking-card';
    
    historyItem.innerHTML = `
        <div class="booking-status ${order.status}">${getStatusText(order.status)}</div>
        <h3>‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏µ‡πà: ${order.queueNumber}</h3>
        <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${new Date(order.orderDate).toLocaleString()}</p>
        <p>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</p>
        ${order.items.map(item => `
            <div class="order-item">
                <span>${item.name}</span>
                <span>${item.price} ‡∏ö‡∏≤‡∏ó</span>
            </div>
        `).join('')}
        <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${order.note || '-'}</p>
    `;
    
    historyList.insertBefore(historyItem, historyList.firstChild);
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô
function generateUniqueQueueNumber() {
    return Math.floor(Math.random() * 1000) + 1;
}

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
function saveOrder(order) {
    let orders = JSON.parse(localStorage.getItem('orders') || '[]');
    orders.push(order);
    localStorage.setItem('orders', JSON.stringify(orders));
}
    </script>
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° SweetAlert2 library ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô head -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>